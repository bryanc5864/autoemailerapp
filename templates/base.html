<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Bulk Emailer</title>

  <!-- Use a user-friendly font from Google Fonts, for example -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">

  <style>
    /* General styling with blue theme */
    :root {
      --blue-light: #cce0ff;
      --blue-medium: #66a3ff;
      --blue-dark: #0052cc;
      --bg-color: #e6f0ff;
      --font-family: 'Open Sans', Arial, sans-serif;
    }

    body {
      background: var(--bg-color);
      font-family: var(--font-family);
      color: #333;
      margin: 0;
      padding: 0;
    }

    nav {
      background: var(--blue-dark);
      color: white;
      padding: 0.75rem;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      margin-right: 1rem;
    }
    nav a:hover {
      text-decoration: underline;
    }

    h1, h2, h3 {
      color: var(--blue-dark);
    }

    .container {
      width: 90%;
      max-width: 800px;
      margin: 1rem auto;
      background: #fff;
      padding: 1rem 2rem 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    /* Flash messages */
    .flash-messages {
      background: var(--blue-light);
      padding: 0.5rem;
      margin-bottom: 1rem;
      border-left: 4px solid var(--blue-medium);
    }
    .flash-messages li {
      list-style: none;
      padding: 0.25rem 0;
    }

    /* Buttons */
    button, input[type="submit"] {
      background: var(--blue-medium);
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s, transform 0.1s;
    }
    button:hover, input[type="submit"]:hover {
      background: var(--blue-dark);
    }
    button:active, input[type="submit"]:active {
      transform: scale(0.97);
    }

    /* Paper plane animation */
    @keyframes flyPlane {
      0% {
        left: -100px;
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      50% {
        opacity: 1;
      }
      100% {
        left: 110%;
        opacity: 0;
      }
    }
    .plane-animation {
      position: fixed;
      top: 30%;
      left: -100px;
      width: 60px;
      height: 60px;
      background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Paper_plane_icon.svg/128px-Paper_plane_icon.svg.png')
                  no-repeat center/contain;
      animation: flyPlane 4s linear forwards;
      z-index: 9999;
    }

    /* "Unboxing" animation for new queue items */
    .unbox {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 48px;
      background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Black_box.svg/100px-Black_box.svg.png')
                  no-repeat center/contain;
      margin-right: 8px;
    }
    @keyframes openBox {
      0%   { transform: scale(0); }
      50%  { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    .unbox.animate {
      animation: openBox 0.8s ease-out forwards;
    }

  </style>

  <script>
    // Launch a plane that flies across the screen
    function launchPlane() {
      const plane = document.createElement('div');
      plane.className = 'plane-animation';
      document.body.appendChild(plane);
      setTimeout(() => plane.remove(), 4000);
    }

    // Trigger unboxing animation on any element with a specific ID
    function triggerUnboxAnimation(boxId) {
      const box = document.getElementById(boxId);
      if (!box) return;
      box.classList.remove('animate');
      void box.offsetWidth; // reflow to restart
      box.classList.add('animate');
    }
  </script>
</head>

<body>
  <nav>
    {% if session.username %}
      Logged in as: {{ session.username }} |
      <a href="{{ url_for('index') }}">Home</a> |
      <a href="{{ url_for('history') }}">History</a> |
      <a href="{{ url_for('logout') }}">Logout</a>
    {% else %}
      <a href="{{ url_for('register') }}">Register</a> |
      <a href="{{ url_for('login') }}">Login</a>
    {% endif %}
  </nav>

  <div class="container">
    <!-- Flash messages -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash-messages">
          <ul>
          {% for msg in messages %}
            <li>{{ msg }}</li>
          {% endfor %}
          </ul>
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>
</body>
</html>
